<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCQ Test Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #ffffff;
            color: #000000;
            line-height: 1.6;
        }

        /* Acknowledgement Modal Styles */
        .acknowledgement-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }

        .acknowledgement-modal {
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            padding: 40px 30px;
        }

        .acknowledgement-modal h1 {
            font-size: 28px;
            margin-bottom: 10px;
            color: #000000;
        }

        .acknowledgement-modal .subtitle {
            font-size: 14px;
            color: #666666;
            margin-bottom: 25px;
        }

        .tc-section {
            margin-bottom: 25px;
        }

        .tc-section h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #000000;
        }

        .tc-section p {
            font-size: 14px;
            color: #333333;
            margin-bottom: 8px;
            line-height: 1.8;
        }

        .tc-section ul {
            list-style-position: inside;
            margin-left: 15px;
            font-size: 14px;
            color: #333333;
        }

        .tc-section ul li {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .checkbox-container {
            display: flex;
            align-items: flex-start;
            margin: 30px 0;
            gap: 12px;
        }

        .checkbox-container input[type="checkbox"] {
            width: 20px;
            height: 20px;
            min-width: 20px;
            cursor: pointer;
            margin-top: 2px;
            accent-color: #000000;
        }

        .checkbox-container label {
            font-size: 14px;
            color: #333333;
            cursor: pointer;
            user-select: none;
            line-height: 1.6;
        }

        .acknowledgement-buttons {
            display: flex;
            gap: 12px;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 24px;
            font-size: 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background-color: #000000;
            color: #ffffff;
            flex: 1;
        }

        .btn-primary:hover:not(:disabled) {
            background-color: #333333;
            transform: translateY(-2px);
        }

        .btn-primary:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .btn-secondary {
            background-color: #f0f0f0;
            color: #000000;
            flex: 1;
        }

        .btn-secondary:hover {
            background-color: #e0e0e0;
        }

        /* Main Test Container Styles */
        .test-container {
            display: none;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: #f9f9f9;
            border-radius: 8px;
            gap: 20px;
            flex-wrap: wrap;
        }

        .test-title {
            font-size: 24px;
            font-weight: 700;
            color: #000000;
        }

        .timer-container {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
            font-weight: 600;
            padding: 10px 20px;
            background-color: #ffffff;
            border: 2px solid #000000;
            border-radius: 6px;
            color: #000000;
        }

        .timer-container.warning {
            background-color: #fff3cd;
            border-color: #ff6b6b;
            color: #ff6b6b;
        }

        .timer-icon {
            font-size: 20px;
        }

        .test-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
        }

        .question-card {
            background-color: #ffffff;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 25px;
            transition: all 0.3s ease;
        }

        .question-card:hover {
            border-color: #000000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .question-number {
            font-size: 14px;
            font-weight: 600;
            color: #666666;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .question-text {
            font-size: 16px;
            font-weight: 600;
            color: #000000;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px 15px;
            background-color: #f9f9f9;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .option:hover {
            background-color: #f0f0f0;
            border-color: #000000;
        }

        .option input[type="checkbox"] {
            width: 18px;
            height: 18px;
            min-width: 18px;
            cursor: pointer;
            margin-top: 3px;
            accent-color: #000000;
        }

        .option label {
            font-size: 14px;
            color: #333333;
            cursor: pointer;
            user-select: none;
            flex: 1;
            margin: 0;
        }

        .question-indicator {
            width: 8px;
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 50%;
            display: inline-block;
            margin-left: 10px;
        }

        .question-indicator.answered {
            background-color: #4caf50;
        }

        .footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            gap: 15px;
            flex-wrap: wrap;
        }

        .progress-info {
            font-size: 14px;
            color: #666666;
            font-weight: 500;
        }

        .footer-buttons {
            display: flex;
            gap: 12px;
        }

        .btn-submit {
            background-color: #4caf50;
            color: #ffffff;
            padding: 12px 30px;
        }

        .btn-submit:hover {
            background-color: #45a049;
            transform: translateY(-2px);
        }

        .btn-reset {
            background-color: #f44336;
            color: #ffffff;
            padding: 12px 30px;
        }

        .btn-reset:hover {
            background-color: #da190b;
            transform: translateY(-2px);
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .acknowledgement-modal {
                padding: 30px 20px;
            }

            .acknowledgement-modal h1 {
                font-size: 24px;
            }

            .test-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .timer-container {
                width: 100%;
                justify-content: center;
            }

            .footer {
                flex-direction: column;
            }

            .footer-buttons {
                width: 100%;
            }

            .btn {
                padding: 10px 20px;
                font-size: 14px;
            }
        }

        @media (max-width: 768px) {
            body {
                font-size: 14px;
            }

            .acknowledgement-overlay {
                padding: 15px;
            }

            .acknowledgement-modal {
                padding: 25px 15px;
                max-height: 90vh;
            }

            .acknowledgement-modal h1 {
                font-size: 20px;
            }

            .tc-section h3 {
                font-size: 15px;
            }

            .tc-section p,
            .tc-section ul,
            .checkbox-container label {
                font-size: 13px;
            }

            .test-container {
                padding: 15px;
            }

            .test-header {
                margin-bottom: 20px;
                padding: 15px;
            }

            .test-title {
                font-size: 20px;
            }

            .timer-container {
                font-size: 16px;
                padding: 8px 15px;
            }

            .question-card {
                padding: 18px;
            }

            .question-text {
                font-size: 15px;
            }

            .option {
                padding: 10px 12px;
            }

            .option label {
                font-size: 13px;
            }
        }

        @media (max-width: 480px) {
            .acknowledgement-modal {
                padding: 20px 15px;
            }

            .acknowledgement-modal h1 {
                font-size: 18px;
            }

            .tc-section h3 {
                font-size: 14px;
            }

            .tc-section p,
            .tc-section ul,
            .checkbox-container label {
                font-size: 12px;
            }

            .checkbox-container {
                margin: 20px 0;
                gap: 10px;
            }

            .acknowledgement-buttons {
                flex-direction: column;
            }

            .test-container {
                padding: 12px;
            }

            .test-header {
                margin-bottom: 15px;
                padding: 12px;
            }

            .test-title {
                font-size: 18px;
            }

            .timer-container {
                font-size: 14px;
                padding: 8px 12px;
                border: 2px solid #000000;
            }

            .test-content {
                gap: 15px;
            }

            .question-card {
                padding: 15px;
            }

            .question-number {
                font-size: 12px;
            }

            .question-text {
                font-size: 14px;
                margin-bottom: 15px;
            }

            .options-container {
                gap: 10px;
            }

            .option {
                padding: 10px;
                gap: 10px;
            }

            .option input[type="checkbox"] {
                width: 16px;
                height: 16px;
            }

            .footer {
                margin-top: 25px;
            }

            .footer-buttons {
                width: 100%;
                flex-direction: column;
            }

            .btn {
                width: 100%;
                padding: 10px 15px;
                font-size: 14px;
            }

            .progress-info {
                font-size: 12px;
                width: 100%;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <!-- Acknowledgement Modal -->
    <div class="acknowledgement-overlay" id="acknowledgementOverlay">
        <div class="acknowledgement-modal">
            <h1>MCQ Test Acknowledgement</h1>
            <p class="subtitle">Please read and accept the terms and conditions before proceeding</p>

            <div class="tc-section">
                <h3>Test Instructions</h3>
                <p>Welcome to the MCQ Test Platform. Before you begin, please carefully read through the following terms and conditions:</p>
            </div>

            <div class="tc-section">
                <h3>Timer Rules</h3>
                <ul>
                    <li>The test will have a total duration of <strong>60 minutes</strong></li>
                    <li>Once you click "Start Test", the timer will begin automatically</li>
                    <li>The timer will continue counting down throughout the test</li>
                    <li>When the timer reaches 5 minutes, it will turn red as a warning</li>
                    <li>When time is up, your responses will be automatically submitted</li>
                    <li>Do not close or refresh the browser window during the test</li>
                </ul>
            </div>

            <div class="tc-section">
                <h3>Question & Answer Guidelines</h3>
                <ul>
                    <li>There are a total of 30 multiple choice questions divided into 3 sets of 10 questions each</li>
                    <li>Each question may have one or more correct answers</li>
                    <li>You can select/deselect answers using the checkboxes</li>
                    <li>You are NOT required to answer all questions before moving to the next set</li>
                    <li>You can skip questions and come back to them later within the same set</li>
                    <li>Green indicators show which questions have been answered</li>
                    <li>After completing Set 3, you will see a completion message</li>
                </ul>
            </div>

            <div class="tc-section">
                <h3>Navigation & Completion</h3>
                <ul>
                    <li>After completing all 10 questions in a set, click "Next Set" to proceed to the next set of questions</li>
                    <li>You can reset all answers in the current set using the "Reset All" button</li>
                    <li>After completing all 3 sets (30 questions), you will receive a completion message</li>
                    <li>Your results will be calculated and sent to your email address within 24 hours</li>
                </ul>
            </div>

            <div class="tc-section">
                <h3>Important Notes</h3>
                <ul>
                    <li>This is an automated test platform - maintain academic integrity</li>
                    <li>Use only authorized materials as per your institution's guidelines</li>
                    <li>Ensure you have a stable internet connection throughout the test</li>
                    <li>Have a backup of your answers in case of technical issues</li>
                </ul>
            </div>

            <div class="checkbox-container">
                <input type="checkbox" id="acceptTerms" />
                <label for="acceptTerms">I have read and understood all the terms, conditions, and rules mentioned above. I agree to abide by them and take this test honestly.</label>
            </div>

            <div class="acknowledgement-buttons">
                <button class="btn btn-primary" id="startTestBtn" disabled>Start Test</button>
            </div>
        </div>
    </div>

    <!-- Main Test Container -->
    <div class="test-container" id="testContainer">
        <div class="test-header">
            <div class="test-title" id="testSetTitle">MCQ Test - Set 1 of 3</div>
            <div class="timer-container" id="timerContainer">
                <span class="timer-icon">⏱️</span>
                <span id="timerDisplay">60:00</span>
            </div>
        </div>

        <div class="test-content" id="testContent"></div>

        <div class="footer">
            <div class="progress-info">
                <span id="answeredCount">0</span> of <span id="totalQuestions">10</span> questions answered
            </div>
            <div class="footer-buttons">
                <button class="btn btn-reset" id="resetBtn">Reset All</button>
                <button class="btn btn-submit" id="submitBtn" style="display:none;">Submit Test</button>
                <button class="btn btn-submit" id="nextSetBtn" style="background-color: #000000;">Next Set</button>
            </div>
        </div>
    </div>

    <!-- Completion Message -->
    <div class="acknowledgement-overlay" id="completionOverlay" style="display: none;">
        <div class="acknowledgement-modal" style="text-align: center; max-width: 500px;">
            <h1 style="font-size: 32px; margin-bottom: 20px; color: #4caf50;">✓ Test Completed!</h1>
            <p style="font-size: 16px; margin-bottom: 20px; line-height: 1.8;">Thank you for completing all 30 questions of the MCQ Test.</p>
            
            <div class="tc-section" style="background-color: #f9f9f9; padding: 20px; border-radius: 8px;">
                <h3>What happens next?</h3>
                <p>Your test responses have been recorded successfully. Your results will be calculated and sent to your registered email address within 24 hours.</p>
                <p style="margin-top: 15px; font-weight: 600; color: #333333;">Please check your email for your detailed score report.</p>
            </div>

            <div class="acknowledgement-buttons" style="margin-top: 30px;">
                <button class="btn btn-primary" id="exitBtn" style="flex: 1;">Exit Test</button>
            </div>
        </div>
    </div>

    <script>
        // MCQ Questions Data - 30 Questions (3 sets of 10)
        const allQuestions = [
            // SET 1
            {
                id: 1,
                question: "What is the capital of France?",
                options: ["London", "Berlin", "Paris", "Madrid"],
                correctAnswers: [2]
            },
            {
                id: 2,
                question: "Which of the following is a programming language?",
                options: ["Python", "HTML", "CSS", "JavaScript"],
                correctAnswers: [0, 3]
            },
            {
                id: 3,
                question: "What is the largest planet in our solar system?",
                options: ["Mars", "Jupiter", "Saturn", "Earth"],
                correctAnswers: [1]
            },
            {
                id: 4,
                question: "Which country is known as the Land of the Rising Sun?",
                options: ["China", "Japan", "Korea", "Vietnam"],
                correctAnswers: [1]
            },
            {
                id: 5,
                question: "What is the chemical symbol for Gold?",
                options: ["Go", "Gd", "Au", "Ag"],
                correctAnswers: [2]
            },
            {
                id: 6,
                question: "Who painted the Mona Lisa?",
                options: ["Vincent Van Gogh", "Pablo Picasso", "Leonardo da Vinci", "Michelangelo"],
                correctAnswers: [2]
            },
            {
                id: 7,
                question: "Which of these are mammals?",
                options: ["Whale", "Penguin", "Dolphin", "Crocodile"],
                correctAnswers: [0, 2]
            },
            {
                id: 8,
                question: "What is the smallest country in the world by area?",
                options: ["Monaco", "Vatican City", "San Marino", "Liechtenstein"],
                correctAnswers: [1]
            },
            {
                id: 9,
                question: "Which programming language is known for web development?",
                options: ["C++", "JavaScript", "Java", "C#"],
                correctAnswers: [1]
            },
            {
                id: 10,
                question: "What is the speed of light in vacuum?",
                options: ["3 × 10^8 m/s", "3 × 10^9 m/s", "3 × 10^7 m/s", "3 × 10^6 m/s"],
                correctAnswers: [0]
            },
            // SET 2
            {
                id: 11,
                question: "What is the chemical formula for water?",
                options: ["H2O", "CO2", "O2", "NaCl"],
                correctAnswers: [0]
            },
            {
                id: 12,
                question: "Which is the longest river in the world?",
                options: ["Amazon", "Nile", "Yangtze", "Mississippi"],
                correctAnswers: [1]
            },
            {
                id: 13,
                question: "What is the hardest natural substance?",
                options: ["Gold", "Diamond", "Iron", "Platinum"],
                correctAnswers: [1]
            },
            {
                id: 14,
                question: "Who wrote 'Romeo and Juliet'?",
                options: ["Jane Austen", "William Shakespeare", "Charles Dickens", "Mark Twain"],
                correctAnswers: [1]
            },
            {
                id: 15,
                question: "What is the smallest unit of life?",
                options: ["Atom", "Molecule", "Cell", "Protein"],
                correctAnswers: [2]
            },
            {
                id: 16,
                question: "Which planet is closest to the Sun?",
                options: ["Venus", "Mercury", "Earth", "Mars"],
                correctAnswers: [1]
            },
            {
                id: 17,
                question: "What is the currency of Japan?",
                options: ["Won", "Yuan", "Yen", "Peso"],
                correctAnswers: [2]
            },
            {
                id: 18,
                question: "Which gas do plants absorb from the atmosphere?",
                options: ["Oxygen", "Nitrogen", "Carbon Dioxide", "Hydrogen"],
                correctAnswers: [2]
            },
            {
                id: 19,
                question: "How many continents are there?",
                options: ["5", "6", "7", "8"],
                correctAnswers: [2]
            },
            {
                id: 20,
                question: "What is the boiling point of water at sea level?",
                options: ["90°C", "100°C", "110°C", "120°C"],
                correctAnswers: [1]
            },
            // SET 3
            {
                id: 21,
                question: "Which ocean is the largest?",
                options: ["Atlantic", "Indian", "Pacific", "Arctic"],
                correctAnswers: [2]
            },
            {
                id: 22,
                question: "What is the chemical symbol for Iron?",
                options: ["Ir", "Fe", "In", "I"],
                correctAnswers: [1]
            },
            {
                id: 23,
                question: "Who invented the telephone?",
                options: ["Thomas Edison", "Alexander Graham Bell", "Nikola Tesla", "Benjamin Franklin"],
                correctAnswers: [1]
            },
            {
                id: 24,
                question: "What is the main component of air?",
                options: ["Oxygen", "Nitrogen", "Carbon Dioxide", "Hydrogen"],
                correctAnswers: [1]
            },
            {
                id: 25,
                question: "How many sides does a hexagon have?",
                options: ["4", "5", "6", "8"],
                correctAnswers: [2]
            },
            {
                id: 26,
                question: "Which country is home to the Great Wall?",
                options: ["India", "Japan", "China", "Russia"],
                correctAnswers: [2]
            },
            {
                id: 27,
                question: "What is the freezing point of water?",
                options: ["-5°C", "0°C", "5°C", "10°C"],
                correctAnswers: [1]
            },
            {
                id: 28,
                question: "Which framework is used for web development?",
                options: ["React", "Django", "Spring", "All of the above"],
                correctAnswers: [3]
            },
            {
                id: 29,
                question: "What is the largest mammal in the world?",
                options: ["Elephant", "Whale", "Giraffe", "Hippopotamus"],
                correctAnswers: [1]
            },
            {
                id: 30,
                question: "How many bones are in the human body?",
                options: ["186", "206", "226", "246"],
                correctAnswers: [1]
            }
        ];

        // Question Sets (10 questions each)
        const questionSets = [
            allQuestions.slice(0, 10),   // Set 1: Questions 1-10
            allQuestions.slice(10, 20),  // Set 2: Questions 11-20
            allQuestions.slice(20, 30)   // Set 3: Questions 21-30
        ];

        let currentSetIndex = 0;
        let questions = questionSets[0];
        let timerInterval = null;
        let timeRemaining = 3600; // 60 minutes in seconds
        const userAnswers = {};

        allQuestions.forEach(q => {
            userAnswers[q.id] = [];
        });

        // ========== TIMER FUNCTIONS ==========
        // Start the timer when test begins
        function startTimer() {
            timerInterval = setInterval(() => {
                timeRemaining = timeRemaining - 1;  // Decrease time by 1 second
                updateTimerDisplay();
                
                // Check if time is finished
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    handleTimeUp();
                }
            }, 1000);  // Update every 1000 milliseconds (1 second)
        }

        // Update timer display on screen
        function updateTimerDisplay() {
            // Calculate minutes and seconds
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            
            // Format timer as MM:SS (like 59:45)
            const display = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('timerDisplay').textContent = display;

            // Turn timer red if less than 5 minutes left
            const timerContainer = document.getElementById('timerContainer');
            if (timeRemaining <= 300) {  // 300 seconds = 5 minutes
                timerContainer.classList.add('warning');  // Add red color
            } else {
                timerContainer.classList.remove('warning');  // Remove red color
            }
        }

        // Handle when time runs out
        function handleTimeUp() {
            alert('Time is up! Your test has been automatically submitted.');
            showCompletionMessage();
        }

        // ========== ACKNOWLEDGEMENT MODAL HANDLING ==========
        // When user checks the T&C checkbox
        document.getElementById('acceptTerms').addEventListener('change', (e) => {
            // Enable Start Test button only if checkbox is checked
            document.getElementById('startTestBtn').disabled = !e.target.checked;
        });

        // When user clicks Start Test button
        document.getElementById('startTestBtn').addEventListener('click', () => {
            // Hide the T&C modal
            document.getElementById('acknowledgementOverlay').style.display = 'none';

            // Show the test questions
            document.getElementById('testContainer').style.display = 'block';

            // Start the countdown timer
            startTimer();
        });

        // ========== DISPLAY QUESTIONS ON SCREEN ==========
        function renderQuestions() {
            const testContent = document.getElementById('testContent');
            testContent.innerHTML = '';  // Clear old questions

            // Loop through each question in current set
            questions.forEach((question, index) => {
                // Create a container for this question
                const questionCard = document.createElement('div');
                questionCard.className = 'question-card';
                questionCard.id = `question-${question.id}`;

                // Build HTML for all options (checkboxes)
                let optionsHTML = '';
                question.options.forEach((option, optionIndex) => {
                    // Check if user already selected this option
                    const isChecked = userAnswers[question.id].includes(optionIndex);
                    
                    optionsHTML += `
                        <div class="option">
                            <input type="checkbox" 
                                   id="opt-${question.id}-${optionIndex}" 
                                   ${isChecked ? 'checked' : ''} 
                                   data-question="${question.id}" 
                                   data-option="${optionIndex}">
                            <label for="opt-${question.id}-${optionIndex}">${option}</label>
                        </div>
                    `;
                });

                // Show green indicator if question is answered
                const indicator = userAnswers[question.id].length > 0 ? 'answered' : '';

                // Add question number, text, and options to card
                questionCard.innerHTML = `
                    <div class="question-number">Question ${index + 1} <span class="question-indicator ${indicator}"></span></div>
                    <div class="question-text">${question.question}</div>
                    <div class="options-container">
                        ${optionsHTML}
                    </div>
                `;

                // Add card to page
                testContent.appendChild(questionCard);
            });

            // Attach click listeners to all checkboxes
            document.querySelectorAll('input[type="checkbox"][data-question]').forEach(checkbox => {
                checkbox.addEventListener('change', handleAnswerChange);
            });

            // Update the "X of 10 answered" text
            updateProgressInfo();
        }

        // ========== HANDLE WHEN USER SELECTS/DESELECTS CHECKBOX ==========
        function handleAnswerChange(e) {
            // Get question ID and option number from checkbox attributes
            const questionId = parseInt(e.target.dataset.question);
            const optionIndex = parseInt(e.target.dataset.option);

            // If checkbox is checked
            if (e.target.checked) {
                // Add this option to user's answers (if not already added)
                if (!userAnswers[questionId].includes(optionIndex)) {
                    userAnswers[questionId].push(optionIndex);
                }
            } else {
                // If checkbox is unchecked - remove this option from answers
                userAnswers[questionId] = userAnswers[questionId].filter(idx => idx !== optionIndex);
            }

            // Update green indicator and progress counter
            updateIndicator(questionId);
            updateProgressInfo();
        }

        // ========== UPDATE GREEN INDICATOR NEXT TO QUESTION ==========
        function updateIndicator(questionId) {
            const indicator = document.querySelector(`#question-${questionId} .question-indicator`);
            
            // If question is answered, show green dot
            if (userAnswers[questionId].length > 0) {
                indicator.classList.add('answered');
            } else {
                // If no answers selected, remove green dot
                indicator.classList.remove('answered');
            }
        }

        // ========== UPDATE "X OF 10 ANSWERED" TEXT ==========
        function updateProgressInfo() {
            // Count how many questions have been answered
            const answered = Object.values(userAnswers).filter(ans => ans.length > 0).length;
            
            // Update the progress text
            document.getElementById('answeredCount').textContent = answered;
            document.getElementById('totalQuestions').textContent = questions.length;
        }

        // ========== RESET ALL ANSWERS BUTTON ==========
        document.getElementById('resetBtn').addEventListener('click', () => {
            // Ask user to confirm before resetting
            if (confirm('Are you sure you want to reset all answers in this set? This action cannot be undone.')) {
                // Clear all answers for current set
                questions.forEach(q => {
                    userAnswers[q.id] = [];
                });
                // Redraw questions without answers
                renderQuestions();
            }
        });

        // ========== NEXT SET BUTTON ==========
        document.getElementById('nextSetBtn').addEventListener('click', () => {
            // Check if there are more sets available
            if (currentSetIndex < questionSets.length - 1) {
                // Move to next set
                currentSetIndex = currentSetIndex + 1;
                questions = questionSets[currentSetIndex];
                renderQuestions();
                updateSetTitle();
            } else {
                // All 3 sets completed - show thank you message
                clearInterval(timerInterval);
                showCompletionMessage();
            }
        });

        // ========== UPDATE SET TITLE (e.g., "Set 1 of 3") ==========
        function updateSetTitle() {
            const setNumber = currentSetIndex + 1;  // Convert 0-2 to 1-3
            const totalSets = questionSets.length;   // Should be 3
            document.getElementById('testSetTitle').textContent = `MCQ Test - Set ${setNumber} of ${totalSets}`;
        }

        // ========== SHOW COMPLETION MESSAGE ==========
        function showCompletionMessage() {
            // Hide test questions
            document.getElementById('testContainer').style.display = 'none';
            
            // Show "Thank You" completion message
            document.getElementById('completionOverlay').style.display = 'flex';
        }

        // ========== EXIT TEST BUTTON ==========
        document.getElementById('exitBtn').addEventListener('click', () => {
            // Reload page to reset everything
            location.reload();
        });

        // ========== SUBMIT TEST BUTTON ==========
        document.getElementById('submitBtn').addEventListener('click', () => {
            // Ask user to confirm submission
            if (confirm('Are you sure you want to submit the entire test? You will not be able to modify your answers after submission.')) {
                // Stop timer and show completion message
                clearInterval(timerInterval);
                showCompletionMessage();
            }
        });

        // ========== WHEN PAGE FIRST LOADS ==========
        // Show "Set 1 of 3" in title
        updateSetTitle();
        
        // Display the questions on page
        renderQuestions();
    </script>
</body>
</html>
